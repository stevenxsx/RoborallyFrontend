{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Shroom\\\\IdeaProjects\\\\RoborallyFrontend\\\\roborally_frontend\\\\src\\\\components\\\\SpaceComponent.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useContext, useMemo } from \"react\";\nimport GameContext from \"../context/GameContext\";\nimport styles from \"../styling/SpaceComponent.module.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\n/*\n Note that we are explicitly specifying that SpaceComponent is of the type FunctionComponent,\n and that the props are of type SpaceComponentProps, also note that we use object destructuring to \"unpack\" the props.\n */\nexport const SpaceComponent = ({\n  space\n}) => {\n  _s();\n\n  const {\n    board,\n    setCurrentPlayerOnSpace,\n    switchCurrentPlayer,\n    setCurrentPlayerInBackend,\n    user\n  } = useContext(GameContext); //Below we essentially define a new variable using the useMemo hook, which can only take the value \"white\" or \"black\"\n  //Additionally the code inside the hook (the calculation of whether it is black or white) is only executed\n  // when the space prop updates (this is known as the dependencies of the hook)\n\n  const color = useMemo(() => {\n    if ((space.x + space.y) % 2 === 0) {\n      return \"white\";\n    } else {\n      return \"black\";\n    }\n  }, [space]); //We define a function using the useCallback hook, it returns a memoized callback/function that is only\n  // updated when the dependencies update.\n\n  const onClickField = useCallback(async () => {\n    await setCurrentPlayerInBackend(board.boardId, user.playerId);\n\n    if (!space.playerId) {\n      // A shorthand, check equivalents at https://bit.ly/2MnA4Rk\n      await setCurrentPlayerOnSpace(space);\n    }\n  }, [setCurrentPlayerOnSpace, space, setCurrentPlayerInBackend]);\n  const playerColor = useMemo(() => {\n    const res = board.playerDtos.find(value => value.playerId === space.playerId);\n    if (res) return res.playerColor;\n  }, [board.playerDtos, space.playerId]);\n  return (\n    /*#__PURE__*/\n    //The classname is set dynamically and can either take the value styles.whiteSpace or styles.blackSpace\n    //We also define that the callback should be called when the div is clicked\n    _jsxDEV(\"div\", {\n      className: styles[color + \"Space\"],\n      onClick: onClickField,\n      children: space.playerId && playerColor && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles[playerColor + \"Player\"]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 49\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)\n  );\n};\n\n_s(SpaceComponent, \"8DDnWR8SLEuxz7ADEQC7bBxi5+Q=\");\n\n_c = SpaceComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"SpaceComponent\");","map":{"version":3,"sources":["C:/Users/Shroom/IdeaProjects/RoborallyFrontend/roborally_frontend/src/components/SpaceComponent.tsx"],"names":["useCallback","useContext","useMemo","GameContext","styles","SpaceComponent","space","board","setCurrentPlayerOnSpace","switchCurrentPlayer","setCurrentPlayerInBackend","user","color","x","y","onClickField","boardId","playerId","playerColor","res","playerDtos","find","value"],"mappings":";;;AAAA,SAA4BA,WAA5B,EAAyCC,UAAzC,EAAqDC,OAArD,QAAoE,OAApE;AAEA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,MAAP,MAAmB,uCAAnB;;;AAKA;AACA;AACA;AACA;AAEA,OAAO,MAAMC,cAAsD,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAAA;;AAEjF,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,uBAAT;AAAkCC,IAAAA,mBAAlC;AAAsDC,IAAAA,yBAAtD;AAAiFC,IAAAA;AAAjF,MAA0FV,UAAU,CAACE,WAAD,CAA1G,CAFiF,CAGjF;AACA;AACA;;AACA,QAAMS,KAAK,GAAGV,OAAO,CAAoB,MAAM;AAC3C,QAAI,CAACI,KAAK,CAACO,CAAN,GAAUP,KAAK,CAACQ,CAAjB,IAAsB,CAAtB,KAA4B,CAAhC,EAAmC;AAC/B,aAAO,OAAP;AACH,KAFD,MAEO;AACH,aAAO,OAAP;AACH;AACJ,GANoB,EAMlB,CAACR,KAAD,CANkB,CAArB,CANiF,CAajF;AACA;;AACA,QAAMS,YAAY,GAAGf,WAAW,CAAC,YAAY;AACzC,UAAMU,yBAAyB,CAACH,KAAK,CAACS,OAAP,EAAgBL,IAAI,CAACM,QAArB,CAA/B;;AACA,QAAI,CAACX,KAAK,CAACW,QAAX,EAAqB;AAAE;AACnB,YAAMT,uBAAuB,CAACF,KAAD,CAA7B;AACH;AAEJ,GAN+B,EAM7B,CAACE,uBAAD,EAA0BF,KAA1B,EAAiCI,yBAAjC,CAN6B,CAAhC;AAOA,QAAMQ,WAAW,GAAGhB,OAAO,CAAC,MAAM;AAC9B,UAAMiB,GAAG,GAAGZ,KAAK,CAACa,UAAN,CAAiBC,IAAjB,CAAsBC,KAAK,IAAIA,KAAK,CAACL,QAAN,KAAmBX,KAAK,CAACW,QAAxD,CAAZ;AACA,QAAIE,GAAJ,EAAS,OAAOA,GAAG,CAACD,WAAX;AACZ,GAH0B,EAGxB,CAACX,KAAK,CAACa,UAAP,EAAmBd,KAAK,CAACW,QAAzB,CAHwB,CAA3B;AAIA;AAAA;AACI;AACA;AACA;AAAK,MAAA,SAAS,EAAEb,MAAM,CAACQ,KAAK,GAAG,OAAT,CAAtB;AAAyC,MAAA,OAAO,EAAEG,YAAlD;AAAA,gBAEMT,KAAK,CAACW,QAAN,IAAkBC,WAAnB,iBAAmC;AAAK,QAAA,SAAS,EAAEd,MAAM,CAACc,WAAW,GAAG,QAAf;AAAtB;AAAA;AAAA;AAAA;AAAA;AAFxC;AAAA;AAAA;AAAA;AAAA;AAHJ;AAUH,CApCM;;GAAMb,c;;KAAAA,c","sourcesContent":["import { FunctionComponent, useCallback, useContext, useMemo } from \"react\";\nimport { Space } from \"../types/Space\";\nimport GameContext from \"../context/GameContext\";\nimport styles from \"../styling/SpaceComponent.module.scss\"\n\nexport type SpaceComponentProps = {\n    space: Space\n}\n/*\n Note that we are explicitly specifying that SpaceComponent is of the type FunctionComponent,\n and that the props are of type SpaceComponentProps, also note that we use object destructuring to \"unpack\" the props.\n */\n\nexport const SpaceComponent: FunctionComponent<SpaceComponentProps> = ({ space }) => {\n\n    const { board, setCurrentPlayerOnSpace, switchCurrentPlayer,setCurrentPlayerInBackend, user } = useContext(GameContext)\n    //Below we essentially define a new variable using the useMemo hook, which can only take the value \"white\" or \"black\"\n    //Additionally the code inside the hook (the calculation of whether it is black or white) is only executed\n    // when the space prop updates (this is known as the dependencies of the hook)\n    const color = useMemo<\"white\" | \"black\">(() => {\n        if ((space.x + space.y) % 2 === 0) {\n            return \"white\"\n        } else {\n            return \"black\"\n        }\n    }, [space])\n    //We define a function using the useCallback hook, it returns a memoized callback/function that is only\n    // updated when the dependencies update.\n    const onClickField = useCallback(async () => {\n        await setCurrentPlayerInBackend(board.boardId, user.playerId)\n        if (!space.playerId) { // A shorthand, check equivalents at https://bit.ly/2MnA4Rk\n            await setCurrentPlayerOnSpace(space)\n        }\n\n    }, [setCurrentPlayerOnSpace, space, setCurrentPlayerInBackend])\n    const playerColor = useMemo(() => {\n        const res = board.playerDtos.find(value => value.playerId === space.playerId)\n        if (res) return res.playerColor\n    }, [board.playerDtos, space.playerId])\n    return (\n        //The classname is set dynamically and can either take the value styles.whiteSpace or styles.blackSpace\n        //We also define that the callback should be called when the div is clicked\n        <div className={styles[color + \"Space\"]} onClick={onClickField}>\n            {/*if space.player is set render the div*/}\n            {(space.playerId && playerColor) && <div className={styles[playerColor + \"Player\"]} />}\n        </div>\n    )\n\n\n}\n\n\n"]},"metadata":{},"sourceType":"module"}